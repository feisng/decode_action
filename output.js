//Mon Dec 29 2025 00:55:29 GMT+0000 (Coordinated Universal Time)
//Base:<url id="cv1cref6o68qmpt26ol0" type="url" status="parsed" title="GitHub - echo094/decode-js: JS混淆代码的AST分析工具 AST analysis tool for obfuscated JS code" wc="2165">https://github.com/echo094/decode-js</url>
//Modify:<url id="cv1cref6o68qmpt26olg" type="url" status="parsed" title="GitHub - smallfawn/decode_action: 世界上本来不存在加密，加密的人多了，也便成就了解密" wc="741">https://github.com/smallfawn/decode_action</url>
(function () {
  "use strict";
  const _0x568524 = "http://14.103.234.187/api";
  const _0x15c6a2 = "qa_card_key";
  const _0x416ef8 = "qa_auth_token";
  const _0x3f3037 = 300000;
  const _0xbac7a9 = {
    "1": "攻击",
    "2": "血量",
    "3": "防御",
    "4": "速度",
    "5": "破甲",
    "6": "破甲抵抗",
    "7": "精准",
    "8": "格挡",
    "9": "减伤",
    "10": "暴击",
    "11": "暴击抵抗",
    "12": "爆伤",
    "13": "爆伤抵抗",
    "14": "技能伤害",
    "15": "免控",
    "16": "眩晕免疫",
    "17": "冰冻免疫",
    "18": "沉默免疫",
    "19": "流血免疫",
    "20": "中毒免疫",
    "21": "灼烧免疫"
  };
  const _0x312fbf = {
    "1": "武器",
    "2": "铠甲",
    "3": "头冠",
    "4": "坐骑"
  };
  const _0x17db30 = {
    name: "司马懿",
    type: "魏国"
  };
  const _0x21c98e = {
    name: "郭嘉",
    type: "魏国"
  };
  const _0x1ea288 = {
    name: "关羽",
    type: "蜀国"
  };
  const _0x4b6cee = {
    name: "诸葛亮",
    type: "蜀国"
  };
  const _0x356e2e = {
    name: "周瑜",
    type: "吴国"
  };
  const _0x411dcf = {
    name: "太史慈",
    type: "吴国"
  };
  const _0x1d9ba1 = {
    name: "吕布",
    type: "群雄"
  };
  const _0x1bcf9d = {
    name: "华佗",
    type: "群雄"
  };
  const _0x1d8e3b = {
    name: "甄姬",
    type: "魏国"
  };
  const _0x5bf601 = {
    name: "黄月英",
    type: "蜀国"
  };
  const _0x152cb1 = {
    name: "孙策",
    type: "吴国"
  };
  const _0x1ccc80 = {
    name: "贾诩",
    type: "群雄"
  };
  const _0x621f69 = {
    name: "曹仁",
    type: "魏国"
  };
  const _0x2f758d = {
    name: "姜维",
    type: "蜀国"
  };
  const _0x261254 = {
    name: "孙坚",
    type: "吴国"
  };
  const _0x2e4138 = {
    name: "公孙瓒",
    type: "群雄"
  };
  const _0xbaf5e0 = {
    name: "典韦",
    type: "魏国"
  };
  const _0x256f78 = {
    name: "赵云",
    type: "蜀国"
  };
  const _0x5ef3e3 = {
    name: "大乔",
    type: "吴国"
  };
  const _0x5af3f1 = {
    name: "张角",
    type: "群雄"
  };
  const _0x21c80a = {
    name: "徐晃",
    type: "魏国"
  };
  const _0x23a122 = {
    name: "荀彧",
    type: "魏国"
  };
  const _0x3771a1 = {
    name: "小典韦",
    type: "魏国"
  };
  const _0x5939f9 = {
    name: "张飞",
    type: "蜀国"
  };
  const _0x1841a7 = {
    name: "小赵云",
    type: "蜀国"
  };
  const _0x3eee49 = {
    name: "庞统",
    type: "蜀国"
  };
  const _0x413fd3 = {
    name: "鲁肃",
    type: "吴国"
  };
  const _0x33bfd9 = {
    name: "陆逊",
    type: "吴国"
  };
  const _0x4d56d9 = {
    name: "甘宁",
    type: "吴国"
  };
  const _0x5bb434 = {
    name: "貂蝉",
    type: "群雄"
  };
  const _0xe44f69 = {
    name: "董卓",
    type: "群雄"
  };
  const _0x235750 = {
    name: "小张角",
    type: "群雄"
  };
  const _0xecfef = {
    name: "张辽",
    type: "魏国"
  };
  const _0x18270c = {
    name: "夏侯惇",
    type: "魏国"
  };
  const _0x213196 = {
    name: "许褚",
    type: "魏国"
  };
  const _0xf70667 = {
    name: "夏侯渊",
    type: "魏国"
  };
  const _0x5749fd = {
    name: "魏延",
    type: "蜀国"
  };
  const _0x559e9c = {
    name: "黄忠",
    type: "蜀国"
  };
  const _0x41ceb7 = {
    name: "马超",
    type: "蜀国"
  };
  const _0x43400a = {
    name: "马岱",
    type: "蜀国"
  };
  const _0x12c0ef = {
    name: "吕蒙",
    type: "吴国"
  };
  const _0x705b90 = {
    name: "黄盖",
    type: "吴国"
  };
  const _0x287472 = {
    name: "蔡文姬",
    type: "魏国"
  };
  const _0x21e8ee = {
    name: "小乔",
    type: "吴国"
  };
  const _0x187064 = {
    name: "袁绍",
    type: "群雄"
  };
  const _0x4d7486 = {
    name: "华雄",
    type: "群雄"
  };
  const _0x142315 = {
    name: "颜良",
    type: "群雄"
  };
  const _0x2c267b = {
    name: "文丑",
    type: "群雄"
  };
  const _0x51da83 = {
    name: "周泰",
    type: "吴国"
  };
  const _0xdc9328 = {
    name: "许攸",
    type: "魏国"
  };
  const _0x29537b = {
    name: "于禁",
    type: "魏国"
  };
  const _0x493bad = {
    name: "张星彩",
    type: "蜀国"
  };
  const _0x905c68 = {
    name: "关银屏",
    type: "蜀国"
  };
  const _0x50cfeb = {
    name: "关平",
    type: "蜀国"
  };
  const _0x361d9c = {
    name: "程普",
    type: "吴国"
  };
  const _0x3aea79 = {
    name: "张昭",
    type: "吴国"
  };
  const _0x94bd87 = {
    name: "陆绩",
    type: "吴国"
  };
  const _0x1d87bc = {
    name: "吕玲绮",
    type: "群雄"
  };
  const _0x2dba45 = {
    name: "潘凤",
    type: "群雄"
  };
  const _0xa31c88 = {
    name: "邢道荣",
    type: "群雄"
  };
  const _0x3facab = {
    name: "祝融夫人",
    type: "群雄"
  };
  const _0x55c161 = {
    name: "孟获",
    type: "群雄"
  };
  const _0x407def = {
    "101": _0x17db30,
    "102": _0x21c98e,
    "103": _0x1ea288,
    "104": _0x4b6cee,
    "105": _0x356e2e,
    "106": _0x411dcf,
    "107": _0x1d9ba1,
    "108": _0x1bcf9d,
    "109": _0x1d8e3b,
    "110": _0x5bf601,
    "111": _0x152cb1,
    "112": _0x1ccc80,
    "113": _0x621f69,
    "114": _0x2f758d,
    "115": _0x261254,
    "116": _0x2e4138,
    "117": _0xbaf5e0,
    "118": _0x256f78,
    "119": _0x5ef3e3,
    "120": _0x5af3f1,
    "201": _0x21c80a,
    "202": _0x23a122,
    "203": _0x3771a1,
    "204": _0x5939f9,
    "205": _0x1841a7,
    "206": _0x3eee49,
    "207": _0x413fd3,
    "208": _0x33bfd9,
    "209": _0x4d56d9,
    "210": _0x5bb434,
    "211": _0xe44f69,
    "212": _0x235750,
    "213": _0xecfef,
    "214": _0x18270c,
    "215": _0x213196,
    "216": _0xf70667,
    "217": _0x5749fd,
    "218": _0x559e9c,
    "219": _0x41ceb7,
    "220": _0x43400a,
    "221": _0x12c0ef,
    "222": _0x705b90,
    "223": _0x287472,
    "224": _0x21e8ee,
    "225": _0x187064,
    "226": _0x4d7486,
    "227": _0x142315,
    "228": _0x2c267b,
    "301": _0x51da83,
    "302": _0xdc9328,
    "303": _0x29537b,
    "304": _0x493bad,
    "305": _0x905c68,
    "306": _0x50cfeb,
    "307": _0x361d9c,
    "308": _0x3aea79,
    "309": _0x94bd87,
    "310": _0x1d87bc,
    "311": _0x2dba45,
    "312": _0xa31c88,
    "313": _0x3facab,
    "314": _0x55c161
  };
  const _0x2462cc = {
    "1": "#8e8e93",
    "2": "#34c759",
    "3": "#007aff",
    "4": "#af52de",
    "5": "#ff9500",
    "6": "#ff3b30"
  };
  let _0x49ddd9 = {
    heroes: null,
    selectedHeroId: null,
    selectedPart: null,
    lockedSlots: [],
    quenchCount: 0,
    continuousQuenching: false,
    autoQuenching: false,
    targetAttrId: null,
    targetAttrValue: null,
    roleId: null,
    authToken: null
  };
  const _0x405ff7 = _0x5bdcc5 => _0xbac7a9[String(_0x5bdcc5)] || "属性" + _0x5bdcc5;
  const _0x352f9d = _0x346879 => _0x312fbf[String(_0x346879)] || "装备" + _0x346879;
  const _0x21c410 = _0x3e3081 => _0x407def[_0x3e3081]?.["name"] || "武将" + _0x3e3081;
  const _0x230d56 = _0x59e393 => _0x2462cc[String(_0x59e393)] || "#8e8e93";
  const _0x4e5012 = _0x511ac6 => {
    {
      if (_0x511ac6 >= 91) {
        return "#ff3b30";
      }
      if (_0x511ac6 >= 81) {
        return "#ff9500";
      }
      if (_0x511ac6 >= 61) {
        return "#af52de";
      }
      if (_0x511ac6 >= 41) {
        return "#007aff";
      }
      if (_0x511ac6 >= 21) {
        return "#34c759";
      }
      return "#8e8e93";
    }
  };
  const _0x39363a = _0x26350c => _0x26350c.colorId ? _0x230d56(_0x26350c.colorId) : _0x4e5012(_0x26350c.attrNum || 0);
  const _0x57ae54 = {
    "1": "攻击",
    "2": "血量",
    "3": "防御",
    "4": "血量"
  };
  const _0x16b975 = _0x272d89 => _0x57ae54[String(_0x272d89)] || "加成";
  const _0x5ca794 = () => {
    const _0x1e66df = document.createElement("canvas");
    const _0x3a23c0 = _0x1e66df.getContext("2d");
    _0x3a23c0.textBaseline = "top";
    _0x3a23c0.font = "14px Arial";
    _0x3a23c0.fillText("fingerprint", 2, 2);
    const _0x50e85d = _0x1e66df.toDataURL();
    const _0x3af0cc = [navigator.userAgent, navigator.language, screen.width + "x" + screen.height, screen.colorDepth, new Date().getTimezoneOffset(), _0x50e85d.slice(-50)].join("|");
    let _0x44591b = 0;
    for (let _0x17bd0c = 0; _0x17bd0c < _0x3af0cc.length; _0x17bd0c++) {
      const _0x48d851 = _0x3af0cc.charCodeAt(_0x17bd0c);
      _0x44591b = (_0x44591b << 5) - _0x44591b + _0x48d851;
      _0x44591b = _0x44591b & _0x44591b;
    }
    return Math.abs(_0x44591b).toString(36);
  };
  const _0x372428 = () => {
    const _0x5dd8aa = document.createElement("canvas").getContext("webgl");
    let _0x36c7c8 = "";
    if (_0x5dd8aa) {
      const _0x4d80f2 = _0x5dd8aa.getExtension("WEBGL_debug_renderer_info");
      if (_0x4d80f2) {
        {
          _0x36c7c8 = _0x5dd8aa.getParameter(_0x4d80f2.UNMASKED_RENDERER_WEBGL);
        }
      }
    }
    const _0x20b4b8 = [navigator.userAgent, _0x36c7c8, navigator.hardwareConcurrency, navigator.deviceMemory].join("|");
    let _0x18815a = 0;
    for (let _0xd5b489 = 0; _0xd5b489 < _0x20b4b8.length; _0xd5b489++) {
      _0x18815a = (_0x18815a << 5) - _0x18815a + _0x20b4b8.charCodeAt(_0xd5b489);
      _0x18815a = _0x18815a & _0x18815a;
    }
    return Math.abs(_0x18815a).toString(36);
  };
  const _0x536b95 = () => {
    {
      const _0x464b67 = [window.ws, window.h5websocket?.["ws"], window.h5websocket, window.gameWs, window.WebSocketClient];
      for (const _0x5bab16 of _0x464b67) {
        {
          if (_0x5bab16 && (_0x5bab16.sendAsync || _0x5bab16.send)) {
            {
              return _0x5bab16;
            }
          }
        }
      }
      return null;
    }
  };
  const _0x2475b0 = async (_0x1d1661, _0x329aae = {}) => {
    {
      const _0x56e75b = _0x536b95();
      if (!_0x56e75b) {
        {
          throw new Error("游戏WebSocket未连接，请确保在游戏页面中运行");
        }
      }
      const _0x189d05 = window.g_utils?.["bon"]?.["encode"] ? {
        ack: 0,
        body: window.g_utils.bon.encode(_0x329aae),
        cmd: _0x1d1661,
        seq: Date.now(),
        time: Date.now()
      } : {
        ack: 0,
        cmd: _0x1d1661,
        params: _0x329aae,
        seq: Date.now(),
        time: Date.now()
      };
      if (_0x56e75b.sendAsync) {
        const _0x5f4aca = await _0x56e75b.sendAsync(_0x189d05);
        if (_0x5f4aca?.["_rawData"]) {
          return _0x5f4aca._rawData;
        }
        if (_0x5f4aca?.["getData"]) {
          return _0x5f4aca.getData();
        }
        if (_0x5f4aca?.["body"] && typeof _0x5f4aca.body === "object" && !ArrayBuffer.isView(_0x5f4aca.body)) {
          return _0x5f4aca.body;
        }
        return _0x5f4aca;
      } else {
        if (_0x56e75b.send) {
          _0x56e75b.send(JSON.stringify(_0x189d05));
          const _0xf6b40c = {
            success: true,
            message: "已发送（无响应确认）"
          };
          return _0xf6b40c;
        }
      }
      throw new Error("WebSocket不支持发送消息");
    }
  };
  const _0x50b7eb = document.createElement("style");
  _0x50b7eb.textContent = "\n    /* Apple Design - 简洁优雅 */\n    /* 展开状态 - 固定在页面中间 */\n    #qa-panel { position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); width:360px; background:rgba(255,255,255,0.95); backdrop-filter:blur(20px); -webkit-backdrop-filter:blur(20px); border-radius:16px; box-shadow:0 8px 32px rgba(0,0,0,0.12); z-index:99999; font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',sans-serif; font-size:13px; color:#1d1d1f; overflow:hidden; transition:all 0.3s cubic-bezier(0.4,0,0.2,1); }\n    /* 折叠状态 - 悬浮球可拖动 */\n    #qa-panel.collapsed { width:44px; height:44px; border-radius:22px; cursor:grab; box-shadow:0 4px 16px rgba(0,0,0,0.15); left:auto; right:16px; top:50%; transform:translateY(-50%); }\n    #qa-panel.collapsed:active { cursor:grabbing; }\n    #qa-panel.collapsed #qa-content, #qa-panel.collapsed #qa-header span { display:none; }\n    #qa-panel.collapsed #qa-header { justify-content:center; padding:12px; border-radius:22px; background:#007aff; }\n    #qa-panel.collapsed #qa-close { font-size:18px; color:#fff; }\n    #qa-header { display:flex; align-items:center; justify-content:space-between; padding:14px 18px; background:#007aff; color:#fff; cursor:default; user-select:none; }\n    #qa-header span { font-weight:600; font-size:15px; letter-spacing:-0.3px; }\n    #qa-close { cursor:pointer; font-size:20px; color:rgba(255,255,255,0.9); transition:transform 0.2s; }\n    #qa-close:hover { transform:scale(1.1); }\n    #qa-content { max-height:65vh; overflow-y:auto; background:rgba(255,255,255,0.98); }\n\n    /* 水印 - 斜着覆盖整个弹窗 */\n    #qa-watermark { position:absolute; top:0; left:0; right:0; bottom:0; pointer-events:none; overflow:hidden; z-index:1; }\n    #qa-watermark::before { content:attr(data-text); position:absolute; top:50%; left:50%; transform:translate(-50%,-50%) rotate(-30deg); font-size:60px; font-weight:700; color:rgba(0,0,0,0.03); white-space:nowrap; letter-spacing:10px; }\n    .qa-watermark-pattern { position:absolute; top:-50%; left:-50%; width:200%; height:200%; display:flex; flex-wrap:wrap; align-content:flex-start; transform:rotate(-30deg); pointer-events:none; }\n    .qa-watermark-item { padding:30px 50px; font-size:14px; font-weight:600; color:rgba(0,0,0,0.04); white-space:nowrap; }\n\n    /* 通用样式 */\n    .qa-toolbar { display:flex; gap:10px; flex-wrap:wrap; align-items:center; padding:10px 14px; background:#f5f5f7; border-radius:0; position:sticky; top:0; z-index:10; border-bottom:1px solid #e5e5ea; }\n    .qa-scrollable { padding:14px; overflow-y:auto; }\n    .qa-input { padding:8px 12px; border:1px solid #d2d2d7; border-radius:10px; background:#fff; color:#1d1d1f; font-size:13px; transition:all 0.2s; outline:none; }\n    .qa-input:focus { border-color:#007aff; box-shadow:0 0 0 3px rgba(0,122,255,0.15); }\n    .qa-select { padding:8px 12px; border:1px solid #d2d2d7; border-radius:10px; background:#fff; color:#1d1d1f; font-size:13px; min-width:100px; cursor:pointer; outline:none; }\n    .qa-select:focus { border-color:#007aff; }\n    .qa-btn { padding:8px 16px; border:none; border-radius:10px; background:#007aff; color:#fff; cursor:pointer; font-size:13px; font-weight:500; transition:all 0.2s; }\n    .qa-btn:hover { background:#0066d6; transform:translateY(-1px); }\n    .qa-btn:active { transform:translateY(0); }\n    .qa-btn:disabled { opacity:0.4; cursor:not-allowed; transform:none; }\n    .qa-btn.success { background:#34c759; }\n    .qa-btn.success:hover { background:#2db14f; }\n    .qa-btn.primary { background:#007aff; }\n    .qa-btn.danger { background:#ff3b30; }\n    .qa-btn.danger:hover { background:#e6352b; }\n    .qa-btn.warning { background:#ff9500; }\n    .qa-btn.warning:hover { background:#e68600; }\n    .qa-btn.secondary { background:#8e8e93; }\n    .qa-btn.small { padding:4px 10px; font-size:11px; border-radius:6px; }\n    .qa-info { font-size:13px; color:#86868b; padding:6px 10px; background:#f5f5f7; border-radius:8px; }\n    .qa-loading { text-align:center; color:#86868b; padding:24px; }\n\n    /* 武将列表 */\n    .qa-hero-list { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:12px; padding:12px; background:#f5f5f7; border-radius:12px; max-height:100px; overflow-y:auto; }\n    .qa-hero-item { padding:8px 14px; background:#fff; border:2px solid transparent; border-radius:10px; cursor:pointer; font-size:12px; font-weight:500; transition:all 0.2s; color:#1d1d1f; box-shadow:0 1px 3px rgba(0,0,0,0.06); }\n    .qa-hero-item:hover { border-color:#007aff; background:#f0f7ff; }\n    .qa-hero-item.active { border-color:#007aff; background:#e5f1ff; color:#007aff; }\n\n    /* 装备标签 */\n    .qa-equip-tabs { display:flex; gap:8px; margin-bottom:12px; }\n    .qa-equip-tab { flex:1; padding:12px 10px; background:#f5f5f7; border:2px solid transparent; border-radius:12px; cursor:pointer; text-align:center; transition:all 0.2s; }\n    .qa-equip-tab:hover { border-color:#d2d2d7; }\n    .qa-equip-tab.active { border-color:#007aff; background:#e5f1ff; }\n    .qa-equip-tab .tab-name { font-weight:600; font-size:13px; color:#1d1d1f; }\n    .qa-equip-tab .tab-level { font-size:11px; color:#86868b; margin-top:3px; }\n    .qa-equip-tab.active .tab-name { color:#007aff; }\n\n    /* 淬炼统计 */\n    .qa-stats { display:flex; gap:20px; padding:12px 16px; background:#f5f5f7; border-radius:12px; margin-bottom:12px; }\n    .qa-stat-item { display:flex; align-items:center; gap:8px; }\n    .qa-stat-label { color:#86868b; font-size:13px; }\n    .qa-stat-value { font-weight:700; font-size:16px; color:#007aff; }\n\n    /* 淬炼孔位 */\n    .qa-slots { display:flex; flex-direction:column; gap:8px; margin-bottom:12px; }\n    .qa-slot { display:flex; align-items:center; gap:12px; padding:12px 16px; background:#f5f5f7; border-radius:12px; border-left:4px solid #d2d2d7; transition:all 0.2s; }\n    .qa-slot:hover { background:#ebebed; }\n    .qa-slot.locked { border-left-color:#007aff; background:#e5f1ff; }\n    .qa-slot-checkbox { width:18px; height:18px; cursor:pointer; accent-color:#007aff; }\n    .qa-slot-label { font-size:13px; color:#86868b; min-width:40px; font-weight:500; }\n    .qa-slot-attr { flex:1; display:flex; justify-content:space-between; font-weight:600; font-size:14px; }\n    .qa-slot-empty { color:#c7c7cc; font-size:13px; }\n\n    /* 操作按钮 */\n    .qa-actions { display:flex; gap:10px; flex-wrap:wrap; padding:14px 0; border-top:1px solid #e5e5ea; margin-bottom:12px; }\n    .qa-actions-row { display:flex; gap:10px; align-items:center; width:100%; }\n    .qa-count { font-size:13px; color:#86868b; margin-left:auto; background:#f5f5f7; padding:6px 12px; border-radius:8px; display:flex; align-items:center; gap:8px; }\n    .qa-count strong { color:#007aff; font-size:15px; font-weight:700; }\n\n    /* 自动淬炼设置 */\n    .qa-auto-section { padding:14px; background:#f5f5f7; border-radius:12px; }\n    .qa-section-title { font-size:14px; font-weight:600; margin-bottom:12px; color:#1d1d1f; display:flex; align-items:center; gap:8px; }\n    .qa-section-title::before { content:''; width:4px; height:16px; background:#007aff; border-radius:2px; }\n    .qa-auto-form { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }\n    .qa-form-item { display:flex; align-items:center; gap:8px; }\n    .qa-form-label { font-size:13px; color:#86868b; }\n\n    /* 提示消息 */\n    .qa-toast { position:fixed; top:24px; left:50%; transform:translateX(-50%) translateY(-20px); padding:12px 24px; background:rgba(0,0,0,0.8); color:#fff; border-radius:12px; font-size:14px; z-index:100001; opacity:0; transition:all 0.3s cubic-bezier(0.4,0,0.2,1); pointer-events:none; backdrop-filter:blur(10px); font-weight:500; }\n    .qa-toast.show { opacity:1; transform:translateX(-50%) translateY(0); }\n    .qa-toast.success { background:rgba(52,199,89,0.95); }\n    .qa-toast.error { background:rgba(255,59,48,0.95); }\n    .qa-toast.warning { background:rgba(255,149,0,0.95); }\n\n    /* 卡密认证弹窗 */\n    .qa-auth-overlay { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); backdrop-filter:blur(5px); z-index:100000; display:flex; align-items:center; justify-content:center; }\n    .qa-auth-modal { background:#fff; border-radius:20px; padding:32px; width:320px; text-align:center; box-shadow:0 20px 60px rgba(0,0,0,0.3); }\n    .qa-auth-title { font-size:20px; font-weight:700; color:#1d1d1f; margin-bottom:8px; }\n    .qa-auth-desc { font-size:14px; color:#86868b; margin-bottom:24px; }\n    .qa-auth-input { width:100%; padding:14px 16px; border:2px solid #d2d2d7; border-radius:12px; font-size:16px; text-align:center; letter-spacing:3px; outline:none; transition:border-color 0.2s; margin-bottom:16px; box-sizing:border-box; font-family:'SF Mono',Monaco,'Courier New',monospace; }\n    .qa-auth-input::placeholder { color:#c7c7cc; letter-spacing:3px; }\n    .qa-auth-input:focus { border-color:#007aff; }\n    .qa-auth-error { color:#ff3b30; font-size:13px; margin-bottom:12px; display:none; }\n\n    /* 滚动条美化 */\n    #qa-content::-webkit-scrollbar { width:6px; }\n    #qa-content::-webkit-scrollbar-track { background:transparent; }\n    #qa-content::-webkit-scrollbar-thumb { background:#d2d2d7; border-radius:3px; }\n    #qa-content::-webkit-scrollbar-thumb:hover { background:#c7c7cc; }\n    .qa-hero-list::-webkit-scrollbar { width:4px; }\n    .qa-hero-list::-webkit-scrollbar-track { background:transparent; }\n    .qa-hero-list::-webkit-scrollbar-thumb { background:#d2d2d7; border-radius:2px; }\n  ";
  document.head.appendChild(_0x50b7eb);
  let _0x5bd2a9 = null;
  const _0x379af5 = (_0x2e932b, _0x4f1d0c = "info", _0x56a59e = 2000) => {
    !_0x5bd2a9 && (_0x5bd2a9 = document.createElement("div"), _0x5bd2a9.className = "qa-toast", document.body.appendChild(_0x5bd2a9));
    _0x5bd2a9.textContent = _0x2e932b;
    _0x5bd2a9.className = "qa-toast show " + _0x4f1d0c;
    setTimeout(() => {
      _0x5bd2a9.classList.remove("show");
    }, _0x56a59e);
  };
  const _0x10ae8b = () => {
    {
      const _0x1882a2 = document.createElement("div");
      _0x1882a2.className = "qa-auth-overlay";
      _0x1882a2.innerHTML = "\n      <div class=\"qa-auth-modal\">\n        <div class=\"qa-auth-title\">淬炼助手</div>\n        <div class=\"qa-auth-desc\">请输入卡密激活使用</div>\n        <input type=\"text\" class=\"qa-auth-input\" id=\"qa-card-input\" placeholder=\"XXXX-XXXX-XXXX-XXXX\" maxlength=\"19\">\n        <div class=\"qa-auth-error\" id=\"qa-auth-error\"></div>\n        <button class=\"qa-btn\" id=\"qa-auth-btn\" style=\"width:100%;padding:14px;\">激活</button>\n      </div>\n    ";
      document.body.appendChild(_0x1882a2);
      const _0x309877 = document.getElementById("qa-card-input");
      const _0x3bb4c4 = document.getElementById("qa-auth-btn");
      const _0x1c646b = document.getElementById("qa-auth-error");
      _0x309877.addEventListener("input", _0xc81cd9 => {
        {
          let _0x5f2526 = _0xc81cd9.target.value.toUpperCase().replace(/[^A-Z0-9]/g, "");
          if (_0x5f2526.length > 16) {
            _0x5f2526 = _0x5f2526.slice(0, 16);
          }
          const _0x4f9072 = _0x5f2526.match(/.{1,4}/g) || [];
          _0xc81cd9.target.value = _0x4f9072.join("-");
        }
      });
      _0x3bb4c4.addEventListener("click", async () => {
        const _0x3c0a02 = _0x309877.value.trim();
        if (!_0x3c0a02 || _0x3c0a02.length !== 19) {
          {
            _0x1c646b.textContent = "请输入正确的卡密格式";
            _0x1c646b.style.display = "block";
            return;
          }
        }
        _0x3bb4c4.disabled = true;
        _0x3bb4c4.textContent = "验证中...";
        _0x1c646b.style.display = "none";
        try {
          const _0x3d2c38 = await _0x29d6d7(_0x3c0a02);
          if (_0x3d2c38.success) {
            localStorage.setItem(_0x15c6a2, _0x3c0a02);
            localStorage.setItem(_0x416ef8, _0x3d2c38.data.token);
            _0x49ddd9.authToken = _0x3d2c38.data.token;
            _0x1882a2.remove();
            _0x351e1a();
            _0x379af5("激活成功", "success");
          } else {
            _0x1c646b.textContent = _0x3d2c38.error || "验证失败";
            _0x1c646b.style.display = "block";
          }
        } catch (_0x56ed4e) {
          _0x1c646b.textContent = _0x56ed4e.message || "网络错误";
          _0x1c646b.style.display = "block";
        } finally {
          {
            _0x3bb4c4.disabled = false;
            _0x3bb4c4.textContent = "激活";
          }
        }
      });
    }
  };
  const _0x29d6d7 = async _0xe8b30c => {
    {
      const _0x54195a = _0x5ca794();
      const _0x5a23a8 = _0x372428();
      try {
        const _0x36c3c7 = {
          cardKey: _0xe8b30c,
          fingerprint: _0x54195a,
          deviceFingerprint: _0x5a23a8,
          deviceInfo: navigator.userAgent,
          roleId: _0x49ddd9.roleId
        };
        const _0x4a4e4d = await fetch(_0x568524 + "/card-auth/verify", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(_0x36c3c7)
        });
        return await _0x4a4e4d.json();
      } catch (_0x3d1b99) {
        {
          const _0x230cb8 = {
            success: false,
            error: "网络连接失败"
          };
          return _0x230cb8;
        }
      }
    }
  };
  const _0x212078 = () => {
    {
      setInterval(async () => {
        {
          if (!_0x49ddd9.authToken) {
            return;
          }
          try {
            const _0x3cbb1 = {
              token: _0x49ddd9.authToken,
              roleId: _0x49ddd9.roleId
            };
            const _0x500063 = await fetch(_0x568524 + "/card-auth/heartbeat", {
              method: "POST",
              headers: {
                "Content-Type": "application/json"
              },
              body: JSON.stringify(_0x3cbb1)
            });
            const _0x1e6ad5 = await _0x500063.json();
            if (_0x1e6ad5.success && _0x1e6ad5.data.token) {
              _0x49ddd9.authToken = _0x1e6ad5.data.token;
              localStorage.setItem(_0x416ef8, _0x1e6ad5.data.token);
            } else {
              !_0x1e6ad5.success && (_0x379af5("认证已过期，请重新激活", "error"), localStorage.removeItem(_0x416ef8), location.reload());
            }
          } catch (_0x2a3ef5) {
            {
              console.error("[淬炼助手] 心跳失败:", _0x2a3ef5);
            }
          }
        }
      }, _0x3f3037);
    }
  };
  const _0x3ea3db = async _0x871155 => {
    {
      if (!_0x49ddd9.authToken || !_0x871155) {
        return;
      }
      try {
        const _0x1dbdba = {
          "Content-Type": "application/json"
        };
        const _0x350840 = {
          token: _0x49ddd9.authToken,
          roleId: _0x871155
        };
        await fetch(_0x568524 + "/card-auth/bind-role", {
          method: "POST",
          headers: _0x1dbdba,
          body: JSON.stringify(_0x350840)
        });
      } catch (_0x4e20b1) {
        console.error("[淬炼助手] 绑定roleId失败:", _0x4e20b1);
      }
    }
  };
  const _0x351e1a = () => {
    const _0x360b2d = document.createElement("div");
    _0x360b2d.id = "qa-panel";
    _0x360b2d.classList.add("collapsed");
    _0x360b2d.innerHTML = "\n      <div id=\"qa-header\">\n        <span>淬炼助手</span>\n        <span id=\"qa-close\">≡</span>\n      </div>\n      <div id=\"qa-content\">\n        <div class=\"qa-toolbar\">\n          <button class=\"qa-btn\" id=\"qa-refresh\">刷新阵容</button>\n          <span class=\"qa-info\" id=\"qa-jade-info\">白玉: --</span>\n          <span class=\"qa-info\" id=\"qa-color-jade-info\">彩玉: --</span>\n        </div>\n        <div class=\"qa-scrollable\">\n        <div id=\"qa-hero-list\" class=\"qa-hero-list\"><div class=\"qa-loading\">点击刷新加载阵容</div></div>\n        <div id=\"qa-equip-tabs\" class=\"qa-equip-tabs\" style=\"display:none;\"></div>\n        <div id=\"qa-quench-detail\" style=\"display:none;\">\n          <div class=\"qa-stats\" id=\"qa-stats\"></div>\n          <div class=\"qa-slots\" id=\"qa-slots\"></div>\n          <div class=\"qa-actions\">\n            <div class=\"qa-actions-row\">\n              <button class=\"qa-btn primary\" id=\"qa-quench-once\">淬炼一次</button>\n              <button class=\"qa-btn success\" id=\"qa-quench-continuous\">连续淬炼</button>\n              <button class=\"qa-btn danger\" id=\"qa-quench-stop\" style=\"display:none;\">停止</button>\n              <div class=\"qa-count\">\n                <button class=\"qa-btn secondary small\" id=\"qa-reset-count\">清零</button>\n                已淬炼: <strong id=\"qa-quench-count\">0</strong>\n              </div>\n            </div>\n          </div>\n          <div class=\"qa-auto-section\">\n            <div class=\"qa-section-title\">自动淬炼设置</div>\n            <div class=\"qa-auto-form\">\n              <div class=\"qa-form-item\">\n                <span class=\"qa-form-label\">属性</span>\n                <select class=\"qa-select\" id=\"qa-target-attr\">\n                  <option value=\"\">选择属性</option>\n                  " + Object.entries(_0xbac7a9).map(([_0x427ca3, _0x1644e8]) => "<option value=\"" + _0x427ca3 + "\">" + _0x1644e8 + "</option>").join("") + "\n                </select>\n              </div>\n              <div class=\"qa-form-item\">\n                <span class=\"qa-form-label\">≥</span>\n                <input type=\"number\" class=\"qa-input\" id=\"qa-target-value\" placeholder=\"数值\" min=\"1\" max=\"100\" style=\"width:60px;\">\n              </div>\n              <button class=\"qa-btn warning\" id=\"qa-auto-start\">开始自动</button>\n              <button class=\"qa-btn danger\" id=\"qa-auto-stop\" style=\"display:none;\">停止</button>\n            </div>\n          </div>\n        </div>\n        </div>\n      </div>\n      <div id=\"qa-watermark\"></div>\n    ";
    document.body.appendChild(_0x360b2d);
    let _0x504d89 = false;
    let _0x4129c6 = false;
    let _0x10713b = 0;
    let _0xfb626c = 0;
    let _0x33b051 = null;
    const _0x2cf4d8 = document.getElementById("qa-header");
    const _0x301812 = _0xea033d => {
      {
        if (!_0x360b2d.classList.contains("collapsed")) {
          return;
        }
        if (_0xea033d.target.id === "qa-close") {
          return;
        }
        _0x504d89 = true;
        _0x4129c6 = false;
        const _0x17ffcb = _0x360b2d.getBoundingClientRect();
        _0xea033d.type === "touchstart" ? (_0x10713b = _0xea033d.touches[0].clientX - _0x17ffcb.left, _0xfb626c = _0xea033d.touches[0].clientY - _0x17ffcb.top) : (_0x10713b = _0xea033d.clientX - _0x17ffcb.left, _0xfb626c = _0xea033d.clientY - _0x17ffcb.top);
        _0x360b2d.style.transition = "none";
      }
    };
    const _0x9a140a = _0x58fb78 => {
      {
        if (!_0x504d89) {
          return;
        }
        _0x58fb78.preventDefault();
        _0x4129c6 = true;
        let _0x1f0f38;
        let _0x1bf4ea;
        _0x58fb78.type === "touchmove" ? (_0x1f0f38 = _0x58fb78.touches[0].clientX, _0x1bf4ea = _0x58fb78.touches[0].clientY) : (_0x1f0f38 = _0x58fb78.clientX, _0x1bf4ea = _0x58fb78.clientY);
        let _0x53e2ad = _0x1f0f38 - _0x10713b;
        let _0x51e2d2 = _0x1bf4ea - _0xfb626c;
        const _0x61bb = window.innerWidth - _0x360b2d.offsetWidth;
        const _0x2de258 = window.innerHeight - _0x360b2d.offsetHeight;
        _0x53e2ad = Math.max(0, Math.min(_0x53e2ad, _0x61bb));
        _0x51e2d2 = Math.max(0, Math.min(_0x51e2d2, _0x2de258));
        _0x360b2d.style.left = _0x53e2ad + "px";
        _0x360b2d.style.top = _0x51e2d2 + "px";
        _0x360b2d.style.right = "auto";
        _0x360b2d.style.transform = "none";
        const _0x5aa66d = {
          left: _0x53e2ad,
          top: _0x51e2d2
        };
        _0x33b051 = _0x5aa66d;
      }
    };
    const _0x250e07 = () => {
      {
        const _0x16b9ea = _0x504d89 && _0x4129c6;
        _0x504d89 = false;
        _0x360b2d.style.transition = "all 0.3s cubic-bezier(0.4,0,0.2,1)";
        _0x16b9ea && setTimeout(() => {
          _0x4129c6 = false;
        }, 300);
      }
    };
    _0x2cf4d8.addEventListener("mousedown", _0x301812);
    document.addEventListener("mousemove", _0x9a140a);
    document.addEventListener("mouseup", _0x250e07);
    const _0x223a98 = {
      passive: false
    };
    _0x2cf4d8.addEventListener("touchstart", _0x301812, _0x223a98);
    const _0x538cdd = {
      passive: false
    };
    document.addEventListener("touchmove", _0x9a140a, _0x538cdd);
    document.addEventListener("touchend", _0x250e07);
    _0x360b2d.addEventListener("mousedown", _0xa97064 => {
      {
        if (_0x360b2d.classList.contains("collapsed")) {
          _0x301812(_0xa97064);
        }
      }
    });
    const _0x5de6ee = {
      passive: false
    };
    _0x360b2d.addEventListener("touchstart", _0x19538b => {
      if (_0x360b2d.classList.contains("collapsed")) {
        _0x301812(_0x19538b);
      }
    }, _0x5de6ee);
    const _0xb60969 = document.getElementById("qa-close");
    const _0x44eeef = _0x3dbb58 => {
      _0x3dbb58.stopPropagation();
      _0x3dbb58.preventDefault();
      const _0x45d68b = _0x360b2d.classList.contains("collapsed");
      _0x360b2d.classList.toggle("collapsed");
      if (_0x45d68b) {
        {
          _0x360b2d.style.left = "50%";
          _0x360b2d.style.top = "50%";
          _0x360b2d.style.right = "auto";
          _0x360b2d.style.transform = "translate(-50%,-50%)";
        }
      } else {
        {
          _0x33b051 ? (_0x360b2d.style.left = _0x33b051.left + "px", _0x360b2d.style.top = _0x33b051.top + "px", _0x360b2d.style.right = "auto", _0x360b2d.style.transform = "none") : (_0x360b2d.style.left = "auto", _0x360b2d.style.right = "16px", _0x360b2d.style.top = "50%", _0x360b2d.style.transform = "translateY(-50%)");
        }
      }
    };
    _0xb60969.addEventListener("click", _0x44eeef);
    const _0x1922f3 = {
      passive: false
    };
    _0xb60969.addEventListener("touchend", _0x44eeef, _0x1922f3);
    const _0x2f7aa1 = _0x106f9b => {
      if (_0x504d89 || _0x4129c6) {
        return;
      }
      if (_0x360b2d.classList.contains("collapsed") && _0x106f9b.target !== _0xb60969) {
        _0x360b2d.classList.remove("collapsed");
        _0x360b2d.style.left = "50%";
        _0x360b2d.style.top = "50%";
        _0x360b2d.style.right = "auto";
        _0x360b2d.style.transform = "translate(-50%,-50%)";
      }
    };
    _0x360b2d.addEventListener("click", _0x2f7aa1);
    document.getElementById("qa-refresh").onclick = _0x385f79;
    document.getElementById("qa-quench-once").onclick = async () => {
      const _0x4a93ea = await _0x16a9c3();
      if (_0x4a93ea) {
        _0x379af5("淬炼成功", "success");
      }
    };
    document.getElementById("qa-quench-continuous").onclick = _0x4e993f;
    document.getElementById("qa-quench-stop").onclick = _0x52558c;
    document.getElementById("qa-auto-start").onclick = _0x572e5e;
    document.getElementById("qa-auto-stop").onclick = _0x32a665;
    document.getElementById("qa-reset-count").onclick = () => {
      {
        _0x49ddd9.quenchCount = 0;
        document.getElementById("qa-quench-count").textContent = "0";
        _0x379af5("已清零", "success");
      }
    };
    _0x212078();
    console.log("[淬炼助手] 已加载 v2.0.0");
  };
  const _0x5024d3 = _0x2d208b => {
    if (!_0x2d208b || typeof _0x2d208b !== "object") {
      return null;
    }
    if (typeof _0x2d208b.useTeamId === "number") {
      return _0x2d208b.useTeamId;
    }
    for (const _0xe3dad9 of Object.keys(_0x2d208b)) {
      {
        const _0xd43e01 = _0x5024d3(_0x2d208b[_0xe3dad9]);
        if (_0xd43e01) {
          return _0xd43e01;
        }
      }
    }
    return null;
  };
  const _0x2ed678 = _0x1cdac6 => {
    {
      const _0x10face = {
        useTeamId: 1,
        teams: {}
      };
      if (!_0x1cdac6) {
        return _0x10face;
      }
      const _0x5bb02e = _0x1cdac6.presetTeamInfo ?? _0x1cdac6;
      const _0x5be6bd = _0x5bb02e.useTeamId ?? _0x5bb02e.presetTeamInfo?.["useTeamId"] ?? _0x5024d3(_0x5bb02e) ?? 1;
      const _0x4c7de6 = _0x5bb02e.presetTeamInfo ?? _0x5bb02e;
      const _0x5954c3 = {};
      const _0x4333e8 = Object.keys(_0x4c7de6 || {}).filter(_0x128076 => /^\d+$/.test(_0x128076));
      for (const _0x5dbb28 of _0x4333e8) {
        {
          const _0xe5817c = Number(_0x5dbb28);
          const _0x569f2b = _0x4c7de6[_0x5dbb28];
          if (!_0x569f2b) {
            {
              const _0x2f1bdf = {
                teamInfo: {}
              };
              _0x5954c3[_0xe5817c] = _0x2f1bdf;
              continue;
            }
          }
          if (_0x569f2b.teamInfo) {
            const _0x1a71be = {
              teamInfo: _0x569f2b.teamInfo
            };
            _0x5954c3[_0xe5817c] = _0x1a71be;
          } else {
            if (_0x569f2b.heroes) {
              {
                const _0x247f59 = {};
                _0x569f2b.heroes.forEach((_0x504afc, _0x5bb85c) => {
                  _0x247f59[String(_0x5bb85c + 1)] = _0x504afc;
                });
                const _0x26ae92 = {
                  teamInfo: _0x247f59
                };
                _0x5954c3[_0xe5817c] = _0x26ae92;
              }
            } else {
              if (typeof _0x569f2b === "object") {
                const _0x1d0002 = Object.values(_0x569f2b).some(_0x264caa => _0x264caa && typeof _0x264caa === "object" && "heroId" in _0x264caa);
                const _0x30871d = {
                  teamInfo: _0x1d0002 ? _0x569f2b : {}
                };
                _0x5954c3[_0xe5817c] = _0x30871d;
              } else {
                const _0x3edfa4 = {
                  teamInfo: {}
                };
                _0x5954c3[_0xe5817c] = _0x3edfa4;
              }
            }
          }
        }
      }
      return {
        useTeamId: Number(_0x5be6bd) || 1,
        teams: _0x5954c3
      };
    }
  };
  const _0x385f79 = async () => {
    {
      const _0x523f71 = document.getElementById("qa-hero-list");
      _0x523f71.innerHTML = "<div class=\"qa-loading\">加载中...</div>";
      try {
        const [_0x34a49a, _0x4d31d6] = await Promise.all([_0x2475b0("presetteam_getinfo", {}), _0x2475b0("role_getroleinfo", {})]);
        const _0xf21373 = _0x2ed678(_0x34a49a);
        const _0x4aa278 = _0xf21373.useTeamId;
        const _0x44e1be = _0xf21373.teams[_0x4aa278]?.["teamInfo"] || {};
        const _0x4baabe = _0x4d31d6?.["role"] || _0x4d31d6;
        const _0x10167c = _0x4baabe?.["heroes"] || {};
        const _0x4385f3 = _0x4baabe?.["items"] || {};
        _0x49ddd9.roleId = _0x4baabe?.["id"] || _0x4baabe?.["roleId"] || null;
        _0x49ddd9.roleId && _0x3ea3db(_0x49ddd9.roleId);
        const _0x4befd7 = document.getElementById("qa-watermark");
        if (_0x4befd7 && _0x49ddd9.roleId) {
          {
            const _0x5edca2 = "ID: " + _0x49ddd9.roleId;
            _0x4befd7.setAttribute("data-text", _0x5edca2);
            let _0x18d290 = "<div class=\"qa-watermark-pattern\">";
            for (let _0x117dc7 = 0; _0x117dc7 < 20; _0x117dc7++) {
              _0x18d290 += "<span class=\"qa-watermark-item\">" + _0x5edca2 + "</span>";
            }
            _0x18d290 += "</div>";
            _0x4befd7.innerHTML = _0x18d290;
          }
        }
        const _0x3a14aa = _0x4385f3["1022"]?.["quantity"] || 0;
        document.getElementById("qa-jade-info").textContent = "白玉: " + _0x3a14aa;
        const _0x2056f3 = _0x4385f3["1023"]?.["quantity"] || 0;
        document.getElementById("qa-color-jade-info").textContent = "彩玉: " + _0x2056f3;
        const _0x1273a7 = [];
        for (const [_0x2e5d26, _0x930887] of Object.entries(_0x44e1be)) {
          const _0x5bec33 = _0x930887?.["heroId"] || _0x930887?.["id"];
          if (!_0x5bec33) {
            continue;
          }
          const _0x322a0e = _0x10167c[String(_0x5bec33)] || {};
          _0x1273a7.push({
            id: Number(_0x5bec33),
            name: _0x21c410(_0x5bec33),
            position: Number(_0x2e5d26),
            level: _0x930887?.["level"] || _0x322a0e?.["level"] || 1,
            equipment: _0x322a0e?.["equipment"] || {}
          });
        }
        if (_0x1273a7.length === 0 && Object.keys(_0x10167c).length > 0) {
          {
            for (const [_0x12835d, _0x4cace6] of Object.entries(_0x10167c)) {
              {
                if (_0x4cace6 && _0x4cace6.equipment) {
                  {
                    _0x1273a7.push({
                      id: Number(_0x12835d),
                      name: _0x21c410(_0x12835d),
                      position: _0x1273a7.length + 1,
                      level: _0x4cace6?.["level"] || 1,
                      equipment: _0x4cace6?.["equipment"] || {}
                    });
                  }
                }
              }
            }
          }
        }
        _0x1273a7.sort((_0x5d8761, _0x54fd12) => _0x5d8761.position - _0x54fd12.position);
        _0x49ddd9.heroes = _0x1273a7;
        _0x49ddd9.allHeroesData = _0x10167c;
        _0x49ddd9.items = _0x4385f3;
        _0x5e38e9(_0x1273a7);
        _0x379af5(_0x1273a7.length === 0 ? "未获取到武将数据" : "刷新成功", _0x1273a7.length === 0 ? "warning" : "success");
      } catch (_0x17e304) {
        _0x523f71.innerHTML = "<div class=\"qa-loading\" style=\"color:#ff3b30;\">" + _0x17e304.message + "</div>";
        _0x379af5("刷新失败: " + _0x17e304.message, "error");
      }
    }
  };
  const _0x5e38e9 = _0x39a2e1 => {
    const _0x13fa29 = document.getElementById("qa-hero-list");
    if (!_0x39a2e1 || _0x39a2e1.length === 0) {
      {
        _0x13fa29.innerHTML = "<div class=\"qa-loading\">暂无阵容数据</div>";
        return;
      }
    }
    _0x13fa29.innerHTML = _0x39a2e1.map(_0x13fef6 => "\n      <div class=\"qa-hero-item " + (_0x49ddd9.selectedHeroId === _0x13fef6.id ? "active" : "") + "\" data-hero-id=\"" + _0x13fef6.id + "\">\n        " + _0x13fef6.name + " Lv." + _0x13fef6.level + "\n      </div>\n    ").join("");
    _0x13fa29.querySelectorAll(".qa-hero-item").forEach(_0x4a3320 => {
      _0x4a3320.addEventListener("click", () => _0x4b42a3(Number(_0x4a3320.dataset.heroId)));
    });
  };
  const _0x4b42a3 = _0x32dbe6 => {
    _0x49ddd9.selectedHeroId = _0x32dbe6;
    _0x49ddd9.selectedPart = null;
    _0x49ddd9.lockedSlots = [];
    _0x49ddd9.quenchCount = 0;
    document.getElementById("qa-quench-count").textContent = "0";
    document.querySelectorAll(".qa-hero-item").forEach(_0x270340 => {
      _0x270340.classList.toggle("active", Number(_0x270340.dataset.heroId) === _0x32dbe6);
    });
    const _0x3085c1 = _0x49ddd9.allHeroesData?.[String(_0x32dbe6)] || {};
    const _0x3de195 = _0x3085c1.equipment || {};
    const _0x371d08 = document.getElementById("qa-equip-tabs");
    const _0x26e186 = Object.keys(_0x3de195);
    if (_0x26e186.length === 0) {
      {
        _0x371d08.style.display = "none";
        document.getElementById("qa-quench-detail").style.display = "none";
        _0x379af5("该武将没有装备数据", "warning");
        return;
      }
    }
    _0x371d08.style.display = "flex";
    _0x371d08.innerHTML = _0x26e186.map(_0xac7ee0 => {
      const _0x2706b5 = _0x3de195[_0xac7ee0];
      return "\n        <div class=\"qa-equip-tab " + (_0x49ddd9.selectedPart === Number(_0xac7ee0) ? "active" : "") + "\" data-slot-id=\"" + _0xac7ee0 + "\">\n          <div class=\"tab-name\">" + _0x352f9d(_0xac7ee0) + "</div>\n          <div class=\"tab-level\">Lv." + (_0x2706b5?.["level"] || 1) + "</div>\n        </div>\n      ";
    }).join("");
    _0x371d08.querySelectorAll(".qa-equip-tab").forEach(_0x1f1c21 => {
      _0x1f1c21.addEventListener("click", () => _0x38999f(Number(_0x1f1c21.dataset.slotId)));
    });
    if (_0x26e186.length > 0) {
      _0x38999f(Number(_0x26e186[0]));
    }
  };
  const _0x38999f = _0x4b24ea => {
    _0x49ddd9.selectedPart = _0x4b24ea;
    document.querySelectorAll(".qa-equip-tab").forEach(_0x110fb6 => {
      _0x110fb6.classList.toggle("active", Number(_0x110fb6.dataset.slotId) === _0x4b24ea);
    });
    const _0x4b5bcd = _0x49ddd9.allHeroesData?.[String(_0x49ddd9.selectedHeroId)] || {};
    const _0x52f8b3 = _0x4b5bcd.equipment?.[String(_0x4b24ea)] || {};
    const _0x5e3579 = _0x52f8b3.quenches || {};
    _0x49ddd9.lockedSlots = [];
    for (const [_0x46b844, _0x4ef6bf] of Object.entries(_0x5e3579)) {
      const _0x48e3d1 = _0x4ef6bf.isLocked || _0x4ef6bf.locked;
      if (_0x48e3d1) {
        _0x49ddd9.lockedSlots.push(Number(_0x46b844));
      }
    }
    console.log("[淬炼助手] 已锁定的孔位:", _0x49ddd9.lockedSlots);
    document.getElementById("qa-quench-detail").style.display = "block";
    const _0x59e579 = document.getElementById("qa-stats");
    const _0x59dd7 = _0x16b975(_0x4b24ea);
    const _0x16449a = _0x4b24ea === 1 ? "quenchAttackExt" : _0x4b24ea === 3 ? "quenchDefenseExt" : "quenchHpExt";
    const _0x4caf9a = _0x52f8b3[_0x16449a] || 0;
    _0x59e579.innerHTML = "\n      <div class=\"qa-stat-item\">\n        <span class=\"qa-stat-label\">淬炼次数</span>\n        <span class=\"qa-stat-value\">" + (_0x52f8b3.quenchTimes || 0) + "</span>\n      </div>\n      <div class=\"qa-stat-item\">\n        <span class=\"qa-stat-label\">" + _0x59dd7 + "</span>\n        <span class=\"qa-stat-value\">+" + _0x4caf9a + "</span>\n      </div>\n    ";
    _0x5a9c28(_0x5e3579);
  };
  const _0x5a9c28 = _0x17f64c => {
    const _0x2f4d54 = document.getElementById("qa-slots");
    const _0x4cbec7 = Object.keys(_0x17f64c).sort((_0x510d9a, _0x30dd40) => Number(_0x510d9a) - Number(_0x30dd40));
    if (_0x4cbec7.length === 0) {
      {
        _0x2f4d54.innerHTML = "<div class=\"qa-loading\">暂无淬炼数据</div>";
        return;
      }
    }
    _0x2f4d54.innerHTML = _0x4cbec7.map(_0x30df14 => {
      const _0x40ae98 = _0x17f64c[_0x30df14];
      const _0x2b4c01 = _0x40ae98.isLocked || _0x40ae98.locked;
      const _0x2e495e = _0x2b4c01 || _0x49ddd9.lockedSlots.includes(Number(_0x30df14));
      const _0x222191 = _0x40ae98.attrId ? _0x39363a(_0x40ae98) : "#c7c7cc";
      return "\n        <div class=\"qa-slot " + (_0x2e495e ? "locked" : "") + "\" data-quench-id=\"" + _0x30df14 + "\">\n          <input type=\"checkbox\" class=\"qa-slot-checkbox\" " + (_0x2e495e ? "checked" : "") + " data-quench-id=\"" + _0x30df14 + "\">\n          <span class=\"qa-slot-label\">孔" + _0x30df14 + "</span>\n          " + (_0x40ae98.attrId ? "\n            <div class=\"qa-slot-attr\" style=\"color:" + _0x222191 + "\">\n              <span>" + _0x405ff7(_0x40ae98.attrId) + "</span>\n              <span>+" + (_0x40ae98.attrNum || 0) + "</span>\n            </div>\n          " : "<span class=\"qa-slot-empty\">未淬炼</span>") + "\n        </div>\n      ";
    }).join("");
    _0x2f4d54.querySelectorAll(".qa-slot-checkbox").forEach(_0x483ac0 => {
      {
        _0x483ac0.addEventListener("change", async _0x5bb322 => {
          await _0x3667d1(Number(_0x483ac0.dataset.quenchId), _0x5bb322.target.checked);
        });
      }
    });
  };
  const _0x3667d1 = async (_0x3e1ff0, _0x2e4cf9) => {
    if (!_0x49ddd9.selectedHeroId || !_0x49ddd9.selectedPart) {
      _0x379af5("请先选择武将和装备", "warning");
      return;
    }
    try {
      const _0x9ada41 = {
        heroId: _0x49ddd9.selectedHeroId,
        part: _0x49ddd9.selectedPart,
        slot: _0x3e1ff0,
        isLocked: _0x2e4cf9
      };
      await _0x2475b0("equipment_updatequenchlock", _0x9ada41);
      if (_0x2e4cf9) {
        if (!_0x49ddd9.lockedSlots.includes(_0x3e1ff0)) {
          _0x49ddd9.lockedSlots.push(_0x3e1ff0);
        }
      } else {
        _0x49ddd9.lockedSlots = _0x49ddd9.lockedSlots.filter(_0x28b3cf => _0x28b3cf !== _0x3e1ff0);
      }
      const _0x27a6bc = document.querySelector(".qa-slot[data-quench-id=\"" + _0x3e1ff0 + "\"]");
      if (_0x27a6bc) {
        _0x27a6bc.classList.toggle("locked", _0x2e4cf9);
      }
      _0x379af5(_0x2e4cf9 ? "已锁定" : "已解锁", "success");
    } catch (_0x45a653) {
      _0x379af5("锁定操作失败: " + _0x45a653.message, "error");
    }
  };
  const _0x16a9c3 = async () => {
    {
      if (!_0x49ddd9.selectedHeroId || !_0x49ddd9.selectedPart) {
        {
          _0x379af5("请选择武将和装备部位", "warning");
          return null;
        }
      }
      if (_0x49ddd9.selectedPart === 1) {
        const _0x4441ad = _0x49ddd9.allHeroesData?.[String(_0x49ddd9.selectedHeroId)];
        const _0x4df0b4 = _0x4441ad?.["equipment"]?.["1"]?.["level"] || 0;
        if (_0x4df0b4 < 4000) {
          _0x379af5("武器等级不足，需要4000级以上（当前" + _0x4df0b4 + "级）", "warning");
          return null;
        }
      }
      try {
        console.log("[淬炼助手] 发送淬炼请求，锁定孔位:", _0x49ddd9.lockedSlots);
        const _0xb6206c = {
          heroId: _0x49ddd9.selectedHeroId,
          part: _0x49ddd9.selectedPart,
          lockedSlot: _0x49ddd9.lockedSlots
        };
        const _0x56b8c0 = await _0x2475b0("equipment_quench", _0xb6206c);
        _0x49ddd9.quenchCount++;
        document.getElementById("qa-quench-count").textContent = _0x49ddd9.quenchCount;
        const _0x876c02 = _0x56b8c0?.["role"] || _0x56b8c0;
        if (_0x876c02?.["heroes"]) {
          const _0x36ed91 = _0x876c02.heroes[String(_0x49ddd9.selectedHeroId)];
          if (_0x36ed91?.["equipment"]) {
            if (_0x49ddd9.allHeroesData) {
              const _0x5264be = _0x49ddd9.allHeroesData[String(_0x49ddd9.selectedHeroId)];
              if (_0x5264be) {
                {
                  for (const [_0x5e3e53, _0x187c15] of Object.entries(_0x36ed91.equipment)) {
                    {
                      if (_0x5264be.equipment?.[_0x5e3e53]) {
                        if (_0x187c15?.["quenches"]) {
                          {
                            for (const [_0x5091f3, _0x50a98c] of Object.entries(_0x187c15.quenches)) {
                              _0x5264be.equipment[_0x5e3e53].quenches?.[_0x5091f3] ? _0x5264be.equipment[_0x5e3e53].quenches[_0x5091f3] = {
                                ..._0x5264be.equipment[_0x5e3e53].quenches[_0x5091f3],
                                ..._0x50a98c
                              } : (!_0x5264be.equipment[_0x5e3e53].quenches && (_0x5264be.equipment[_0x5e3e53].quenches = {}), _0x5264be.equipment[_0x5e3e53].quenches[_0x5091f3] = _0x50a98c);
                            }
                          }
                        }
                        _0x187c15?.["quenchTimes"] !== undefined && (_0x5264be.equipment[_0x5e3e53].quenchTimes = _0x187c15.quenchTimes);
                        _0x187c15?.["quenchAttackExt"] !== undefined && (_0x5264be.equipment[_0x5e3e53].quenchAttackExt = _0x187c15.quenchAttackExt);
                        _0x187c15?.["quenchHpExt"] !== undefined && (_0x5264be.equipment[_0x5e3e53].quenchHpExt = _0x187c15.quenchHpExt);
                        _0x187c15?.["quenchDefenseExt"] !== undefined && (_0x5264be.equipment[_0x5e3e53].quenchDefenseExt = _0x187c15.quenchDefenseExt);
                      }
                    }
                  }
                }
              }
            }
            const _0x28b6a6 = _0x49ddd9.allHeroesData?.[String(_0x49ddd9.selectedHeroId)];
            const _0x214ae0 = _0x28b6a6?.["equipment"]?.[String(_0x49ddd9.selectedPart)];
            if (_0x214ae0?.["quenches"]) {
              {
                _0x5a9c28(_0x214ae0.quenches);
                const _0x596547 = document.getElementById("qa-stats");
                const _0x23727e = _0x16b975(_0x49ddd9.selectedPart);
                const _0x2cdda0 = _0x49ddd9.selectedPart === 1 ? "quenchAttackExt" : _0x49ddd9.selectedPart === 3 ? "quenchDefenseExt" : "quenchHpExt";
                const _0x2f5768 = _0x214ae0[_0x2cdda0] || 0;
                _0x596547.innerHTML = "\n              <div class=\"qa-stat-item\">\n                <span class=\"qa-stat-label\">淬炼次数</span>\n                <span class=\"qa-stat-value\">" + (_0x214ae0.quenchTimes || 0) + "</span>\n              </div>\n              <div class=\"qa-stat-item\">\n                <span class=\"qa-stat-label\">" + _0x23727e + "</span>\n                <span class=\"qa-stat-value\">+" + _0x2f5768 + "</span>\n              </div>\n            ";
              }
            }
          }
        }
        if (_0x876c02?.["items"]) {
          const _0x33726a = _0x876c02.items["1022"];
          if (_0x33726a) {
            {
              document.getElementById("qa-jade-info").textContent = "白玉: " + (_0x33726a.quantity || 0);
            }
          }
          const _0x445eca = _0x876c02.items["1023"];
          _0x445eca && (document.getElementById("qa-color-jade-info").textContent = "彩玉: " + (_0x445eca.quantity || 0));
        }
        return _0x56b8c0;
      } catch (_0x5b227f) {
        {
          _0x379af5("淬炼失败: " + _0x5b227f.message, "error");
          return null;
        }
      }
    }
  };
  const _0x3d0a12 = _0x15c0fe => {
    if (!_0x15c0fe) {
      return false;
    }
    const _0xbb73db = _0x49ddd9.allHeroesData?.[String(_0x49ddd9.selectedHeroId)];
    const _0x15398f = _0xbb73db?.["equipment"]?.[String(_0x49ddd9.selectedPart)];
    if (!_0x15398f?.["quenches"]) {
      return false;
    }
    for (const _0x47d55e of Object.values(_0x15398f.quenches)) {
      {
        if (_0x47d55e.colorId && _0x47d55e.colorId >= 5) {
          return true;
        }
      }
    }
    return false;
  };
  const _0x209ac5 = _0x480967 => {
    {
      if (!_0x480967 || !_0x49ddd9.targetAttrId || !_0x49ddd9.targetAttrValue) {
        return false;
      }
      const _0x3246da = _0x49ddd9.allHeroesData?.[String(_0x49ddd9.selectedHeroId)];
      const _0x5ededa = _0x3246da?.["equipment"]?.[String(_0x49ddd9.selectedPart)];
      if (!_0x5ededa?.["quenches"]) {
        return false;
      }
      for (const _0x129423 of Object.values(_0x5ededa.quenches)) {
        if (_0x129423.attrId && _0x129423.attrId === Number(_0x49ddd9.targetAttrId)) {
          if (_0x129423.attrNum && _0x129423.attrNum >= Number(_0x49ddd9.targetAttrValue)) {
            {
              return true;
            }
          }
        }
      }
      return false;
    }
  };
  let _0x5e4804 = null;
  const _0x4e993f = async () => {
    if (_0x49ddd9.continuousQuenching) {
      return;
    }
    _0x49ddd9.continuousQuenching = true;
    document.getElementById("qa-quench-continuous").style.display = "none";
    document.getElementById("qa-quench-stop").style.display = "inline-block";
    document.getElementById("qa-quench-once").disabled = true;
    _0x379af5("开始连续淬炼，出现橙色或红色属性时自动暂停", "warning");
    const _0x563c20 = async () => {
      if (!_0x49ddd9.continuousQuenching) {
        return;
      }
      try {
        {
          const _0x5672cc = await _0x16a9c3();
          if (_0x5672cc && _0x3d0a12(_0x5672cc)) {
            _0x52558c();
            _0x379af5("发现橙色或红色属性，已自动暂停", "success");
            return;
          }
          const _0x4e0e12 = Math.floor(Math.random() * 150) + 350;
          await new Promise(_0x3b480e => setTimeout(_0x3b480e, _0x4e0e12));
          if (_0x49ddd9.continuousQuenching) {
            _0x5e4804 = setTimeout(_0x563c20, 0);
          }
        }
      } catch (_0x2c9283) {
        {
          _0x52558c();
        }
      }
    };
    _0x563c20();
  };
  const _0x52558c = () => {
    _0x49ddd9.continuousQuenching = false;
    _0x5e4804 && (clearTimeout(_0x5e4804), _0x5e4804 = null);
    document.getElementById("qa-quench-continuous").style.display = "inline-block";
    document.getElementById("qa-quench-stop").style.display = "none";
    document.getElementById("qa-quench-once").disabled = false;
    _0x379af5("已停止连续淬炼");
  };
  let _0x4432c2 = null;
  const _0x572e5e = async () => {
    const _0x244b73 = document.getElementById("qa-target-attr").value;
    const _0x1a4dbf = document.getElementById("qa-target-value").value;
    if (!_0x244b73 || !_0x1a4dbf) {
      _0x379af5("请设置目标属性和数值", "warning");
      return;
    }
    _0x49ddd9.targetAttrId = _0x244b73;
    _0x49ddd9.targetAttrValue = _0x1a4dbf;
    _0x49ddd9.autoQuenching = true;
    document.getElementById("qa-auto-start").style.display = "none";
    document.getElementById("qa-auto-stop").style.display = "inline-block";
    document.getElementById("qa-quench-once").disabled = true;
    document.getElementById("qa-quench-continuous").disabled = true;
    _0x379af5("开始自动淬炼，目标：" + _0x405ff7(_0x244b73) + " >= " + _0x1a4dbf, "warning");
    const _0x6de343 = async () => {
      {
        if (!_0x49ddd9.autoQuenching) {
          return;
        }
        try {
          {
            const _0x507e23 = await _0x16a9c3();
            if (_0x507e23 && _0x209ac5(_0x507e23)) {
              {
                _0x32a665();
                _0x379af5("已达到目标：" + _0x405ff7(_0x49ddd9.targetAttrId) + " >= " + _0x49ddd9.targetAttrValue, "success");
                return;
              }
            }
            const _0x5688e2 = Math.floor(Math.random() * 150) + 350;
            await new Promise(_0xd07407 => setTimeout(_0xd07407, _0x5688e2));
            if (_0x49ddd9.autoQuenching) {
              _0x4432c2 = setTimeout(_0x6de343, 0);
            }
          }
        } catch (_0xf8f10c) {
          _0x32a665();
        }
      }
    };
    _0x6de343();
  };
  const _0x32a665 = () => {
    {
      _0x49ddd9.autoQuenching = false;
      if (_0x4432c2) {
        {
          clearTimeout(_0x4432c2);
          _0x4432c2 = null;
        }
      }
      document.getElementById("qa-auto-start").style.display = "inline-block";
      document.getElementById("qa-auto-stop").style.display = "none";
      document.getElementById("qa-quench-once").disabled = false;
      document.getElementById("qa-quench-continuous").disabled = false;
      _0x379af5("已停止自动淬炼");
    }
  };
  const _0x9fbead = () => {
    const _0x9a1889 = localStorage.getItem(_0x416ef8);
    const _0x376dcc = localStorage.getItem(_0x15c6a2);
    if (_0x9a1889 && _0x376dcc) {
      _0x49ddd9.authToken = _0x9a1889;
      _0x351e1a();
      _0x29d6d7(_0x376dcc).then(_0x10ab97 => {
        !_0x10ab97.success && (_0x379af5("认证已过期，请重新激活", "error"), localStorage.removeItem(_0x416ef8), location.reload());
      });
    } else {
      {
        _0x10ae8b();
      }
    }
  };
  document.readyState === "loading" ? document.addEventListener("DOMContentLoaded", _0x9fbead) : _0x9fbead();
})();